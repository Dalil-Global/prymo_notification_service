#############################################
# üîß SERVER CONFIGURATION
#############################################
server.port=8008
spring.application.name=notification-service

#############################################
# üóÑÔ∏è DATABASE CONFIGURATION (PostgreSQL)
#############################################
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

#############################################
# üïäÔ∏è FLYWAY MIGRATIONS
#############################################
spring.flyway.enabled=false


#############################################
# ‚úâÔ∏è EMAIL CONFIGURATION (Custom SMTP)
#############################################
spring.mail.host=localhost
spring.mail.port=10025
spring.mail.username=no-reply@prymo.com
spring.mail.password=your_smtp_password
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000
notification.email.default-sender=no-reply@prymo.com
debug=false

#############################################
# üì± SMS CONFIGURATION (TERMII)
#############################################
termii.api.base-url=https://v3.api.termii.com
termii.api.key=${TERMII_API_KEY}
termii.default.sender=Prymo
termii.default.channel=dnd

#############################################
# üî• PUSH NOTIFICATION (Firebase)
#############################################
firebase.credentials.path=${FIREBASE_CREDENTIALS_PATH}

#############################################
# üì¨ KAFKA CONFIGURATION
#############################################
spring.kafka.bootstrap-servers=localhost:9092
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer
spring.kafka.consumer.group-id=notification-service
spring.kafka.listener.concurrency=3

# Topic names (optional properties for convenience)
notification.topic.email=email.notifications
notification.topic.sms=sms.notifications
notification.topic.push=push.notifications

#############################################
# üåê LOGGING
#############################################
logging.level.root=INFO
logging.level.org.springframework=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.notification_service=DEBUG

#############################################
# ‚öôÔ∏è APP SETTINGS
#############################################
notification.retry.max-attempts=3
notification.retry.interval-seconds=30


#############################################
# üõ°Ô∏è RESILIENCE (Circuit Breaker)
#############################################
resilience4j.circuitbreaker.instances.termii.registerHealthIndicator=true
resilience4j.circuitbreaker.instances.termii.slidingWindowSize=10
resilience4j.circuitbreaker.instances.termii.minimumNumberOfCalls=5
resilience4j.circuitbreaker.instances.termii.permittedNumberOfCallsInHalfOpenState=3
resilience4j.circuitbreaker.instances.termii.automaticTransitionFromOpenToHalfOpenEnabled=true
resilience4j.circuitbreaker.instances.termii.waitDurationInOpenState=5s
resilience4j.circuitbreaker.instances.termii.failureRateThreshold=50
